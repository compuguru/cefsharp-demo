<html>
    <head>
        <style>
            body {
                width: 100%;
                height: 100%;
                background-color: coral;
                overflow: hidden;
            } 
            .container {
                color: green;
            }
            @media print {
                .container {
                    color: mediumslateblue;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div><button id="memoryButton">Run out of memory</button> <span id="memoryText"></span></div>
            <div><button id="invalidCharButton">String with invalid Unicode sequence</button> <span id="memoryText"></span></div>
            <h1>
                CefSharp lets you embed Chromium in .NET apps. It is a lightweight .NET wrapper around the
                Chromium Embedded Framework (CEF) by Marshall A. Greenblatt. About 30% of the bindings are
                written in C++/CLI with the majority of code here is C#. It can be used from C# or VB, or any
                other CLR language. CefSharp provides both WPF and WinForms web browser control implementations.
            </h1>
            <h2 id="sizeText">The size is</h2>
            <img src="https://sp16.contoso.com/hbpic/TestPic.jpg" style="max-height:100%;max-width:100%;">
            <script type="text/javascript">
                function onResize() {
                    var element = document.getElementById('sizeText');
                    element.innerHTML = `${window.innerWidth} x ${window.innerHeight}`;
                }
                window.addEventListener('resize', onResize);
                onResize();

                // Under HKEY_CURRENT_USER\Software\Microsoft\Windows\Windows Error Reporting, set Disabled to REG_DWORD equal 1
                // WER files are at C:\ProgramData\Microsoft\Windows\WER\ReportArchive

                document.getElementById('memoryButton').addEventListener('click', function () {
                    var totalMemory = 0;
                    var size = 1024 * 1024;
                    var x = [{}];
                    setTimeout(() => {
                        setInterval(() => {
                            document.getElementById("memoryText").innerHTML = `${totalMemory} (${x.length})`;
                            try {
                                x.push(new ArrayBuffer(size));
                                totalMemory += size;
                            }
                            catch (e) {
                                size = size / 2;
                            }
                        }, 5);
                    }, 1000);
                });

                // Call C# from JS
                CefSharp.BindObjectAsync("coolGuidGenerator").then(function () {
                    document.getElementById('invalidCharButton').addEventListener('click', function () {
                        console.log(window.coolGuidGenerator.newGuid());
                        console.log(window.coolGuidGenerator.validateGuid("fooo"));

                        //// Uncaught (in promise) Error: System.Text.EncoderFallbackException: Unable to translate Unicode character \uDC11 at index 0 to specified code page.
                        //console.log(window.coolGuidGenerator.validateGuid("\udc11"));

                        // Uncaught (in promise) Error: System.Text.EncoderFallbackException: Unable to translate Unicode character \uD83D at index 0 to specified code page.
                        console.log(window.coolGuidGenerator.validateGuid("'\uD83D'"));
                    });
                });

                CefSharp.BindObjectAsync("coolGuidGenerator2").then(function () {
                    window.coolGuidGenerator2.validateGuid2("foo", "hello", 1987).then(function () {
                        console.log(arguments);
                    });
                });

                (async function () {
                    await CefSharp.BindObjectAsync("boundAsync");

                    boundAsync.div(16, 2).then(function (actualResult) {
                        const expectedResult = 9;
                        console.assert(expectedResult === actualResult, "Divide 16 / 2 resulted in " + expectedResult);
                        console.log(actualResult);
                    });

                    boundAsync.error().catch(function (e) {
                        var msg = "Error: " + e + "(" + Date() + ")";
                        console.log(msg);
                    });
                })();
            </script>
        </div>
    </body>
</html>